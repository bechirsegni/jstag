!function(){"use strict";function n(n,t,e){var r=-1,i=n.length;for(2===arguments.length&&i&&(e=n[++r]);++r<i;)e=t(e,n[r],r,n);return e}function t(t,e){return n(t,function(n,r,i){return e(r,i,t)&&n.push(r),n},[])}function e(t,e){return n(t,function(n,r,i){return n.push(e(r,i,t)),n},[])}function r(n){return n&&"object"==typeof n}function i(n){return"[object Array]"==={}.toString.call(n)}function o(n){return"function"==typeof n}function a(n){return"string"==typeof n}function u(n,t){for(var e=0,r=n.length;r>e;e++)t(n[e],e,n)}function c(n){var t=[];for(var e in n)t.push(e);return t}function s(n,t){t||(t="");var e=[];return r(n)?i(n)?(e.push(t+"_len="+n.length,t+"_json="+pn(JSON.stringify(n))),u(n,function(n){e.push(s(n,t))})):u(mn(n),function(i){var u=pn(i),c=n[i];o(c)||(""!==t&&(u=[t,u].join(".")),r(c)?e.push(s(c,u)):(a(c)&&c.length>0||null!=c)&&e.push(u+"="+pn(c)))}):e.push(t+"="+n),e.join("&")}function d(n){return"boolean"==typeof n}function l(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];var o=!1;return d(e[0])&&(o=!0,e=e.slice(1)),n(e,function(n,t){return void 0===t?n:(u(mn(t),function(e){n[e]=o&&r(t[e])?l(!0,n[e],t[e]):t[e]}),n)})}function f(n){var t=l({url:"//c.lytics.io",location:vn.href,payloadQueue:[],id:void 0,cid:void 0,loadid:void 0,serializer:s,delay:2e3,blockload:!1,path:"/c/",idpath:"/cid/",cookie:yn,sesname:bn,stream:void 0,sessecs:1800,qsargs:[],ref:!0,tagid:"jstag-csdk",pagedata:{},version:wn},n);return t.cid&&(t.cid=[].concat(t.cid)),t}function g(n,t,e){return""+n.url+n[e||"path"]+t}function h(n,t){var e=n.config,r=g(e,e.cid[0],"idpath");n.jsonp(r,t)}function p(n){var t=RegExp(n+"=([^;]+)"),e=t.exec(decodeURIComponent(gn.cookie));return e&&e[1]}function m(n,t){for(var e=arguments.length,r=Math.min(2,e-1),i=Array(e-r),o=r;e>o;o++)i[o-r]=arguments[o];var a=setTimeout(function(){n.apply(null,i)},t);return kn.push(a),a}function v(n){for(var t=arguments.length,e=Math.min(1,t-1),r=Array(t-e),i=e;t>i;i++)r[i-e]=arguments[i];m.apply(null,[n,0].concat(r))}function w(){return"u_"+Math.floor(1e18*Math.random())}function y(n){n(w())}function b(n){return function(){null!=n&&(n.apply(null,arguments),n=null)}}function k(n){var t=this,e=b(function(e){t.setid(e),n(e)}),r=p(this.config.cookie);r&&r.length?v(e,r):this.config.loadid?v(h,this,e):v(y,e)}function _(n,t,e){return e||(e=gn),l(e.createElement(n),t)}function A(n){return n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")}function j(){for(var n=null,t=0,e=arguments.length;e>t;t++)try{return arguments[t](n)}catch(r){n=r}}function C(t){return n(t,function(n,t){return n[t[0]]=t[1],n},{})}function M(n){var r=_("a",{href:n}),i=t(c(r),function(n){var t=j(function(){return r[n]});return null==t?!1:a(t)}),o=C(e(i,function(n){return[n,r[n]]}));return null==o.origin&&(o.origin=A(o)),o}function T(n){var t=new Date;return t.setTime(t.getTime()+1e3*n),t}function E(n,t,e){e||(e=7776e3);var r=T(e),i=M(vn).hostname,o=n+"="+pn(t)+(i&&i.split(".").length>1?"; domain="+i:"")+("; expires="+r.toUTCString());gn.cookie=o}function I(n){var t=this.config.cookie,e=p(t);e&&e.length&&(this.changeId=e),E(t,n)}function x(n){console.warn("Deprecation warning: "+n)}function S(n){var t,e,r;return u(n,function(n){switch(typeof n){case"string":t=n;break;case"function":r=n;break;case"object":e=n;break;case"boolean":x("boolean argument is passed to send. Ignoring.");break;default:throw new TypeError("unable to process jstag.send event: unknown value type ("+typeof n+")")}}),null==e&&(e={}),{stream:t,data:e,callback:r}}function D(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];this.sendMessage(S(t))}function F(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var r=S(t);r.data=l({_e:"mk"},this.pageData,r.data),this.sendMessage(r,!0)}function O(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var r=S(t);r.data=l({_e:"pv"},this.pageData,r.data),this.sendMessage(r)}function z(){_n.userAgent||_n.vendor||window.opera}function Q(){return j(function(){return window.self!==window.top},function(){return!0})}function U(n){return n.replace(/^https?:\/\//,"")}function B(n,t,e){var r=n.data;if(z()){r._mob="t";var i="unknown";/Android/i.test(An)?i="Android":/BlackBerry/i.test(An)?i="Blackberry":/iPhone|iPad|iPod/i.test(An)?i="IOS":/IEMobile/i.test(An)&&(i="WinMobile"),r._device=i}else r._nmob="t",r._device="desktop";r.url=U(vn.href),Q()&&(r._if="t"),"_uid"in r&&!r._uid&&delete r._uid;var o=p("__utma");if(o&&o.length>10&&(r._ga=o.substring(0,o.indexOf(".",10))),!("_uid"in r)){var a=p(t.cookie);a&&a.length&&(r._uid=a)}var u=p("optimizelyEndUserId");u&&(r.optimizelyid=u),"_v"in r||(r._v=wn),e&&e.changeId&&(r._uido=e.changeId)}function P(n,t){for(var e=0,r=n.length;r>e;e++)if(n[e]===t)return e;return-1}function R(n,t){return-1!==P(n,t)}function q(n,t){return n+(R(n,"?")?"&":"?")+t}function G(){return(new Date).getTime()}function N(n,t){null==t&&(t=!1);var e=this,r=this.config;if(!r.url||!r.cid)throw new TypeError("Must have collection url and ProjectIds (cid)");if(this.blocked&&!t)return void r.payloadQueue.push(n);if(t){if(null==n.callback)throw new TypeError("cannot call mock without a callback");var i=n.data;u(r.payloadQueue,function(n){l(i,n.data)})}n.stream||(n.stream=r.stream),u(this.config.cid,function(i){var o=g(r,i)+(n.stream?"/"+n.stream:"");-1===o.indexOf("_uidn=")&&r.cookie!==yn&&(o=q(o,"_uidn="+r.cookie)),n.data._ts=G(),B(n,r,e),e.getid(function(r){r&&!n.data._uid&&(n.data._uid=r,n.data._getid="t"),e.ioCollect(n,o,t)})})}function L(n){E(n,"",-60)}function J(){L(this.config.cookie),L(this.config.sesname)}function V(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return S(t)}function W(n){return"number"==typeof n}function Y(n){if(this.blocked)return this;var t=this;return this.blocked=this.config.blockload=!0,W(n)||(n=2e3),m(function(){t.unblock()},n),this}function $(){if(!this.blocked)return this;var n=this;return this.blocked=this.config.blockload=!1,u(this.config.payloadQueue,function(t){n.sendMessage(t)}),this.config.payloadQueue.length=0,this}function H(t){return n(mn(t),function(n,e){return n.push([e,t[e]]),n},[])}function K(n,e){return C(t(H(n),e))}function X(n){return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function Z(n){var t={};return"string"!=typeof n?t:(n=X(n).replace(/^(\?|#|&)/,""))?(u(n.split("&"),function(n){var e=n.replace(/\+/g," ").split("="),r=e.shift(),o=e.length>0?e.join("="):void 0;r=Cn(r),o=void 0===o?null:Cn(o),void 0===t[r]?t[r]=o:i(t[r])?t[r].push(o):t[r]=[t[r],o]}),t):t}function nn(n,t){return 0===n.indexOf(t)}function tn(){var n=this.config,t=p(n.sesname),e=this.pageData,r=M(n.location);if(r.search.length>0){var i=Z(r.search);l(e,K(i,function(n){return nn(n[0],"utm_")})),n.qsargs&&n.qsargs.length>0&&l(e,K(i,function(t){return R(n.qsargs,t[0])}))}t||(e._sesstart="1");var o=this.referrer;if(o&&o.length>0){var a=/\/\/(.*)\//.exec(o);if(a&&!R(a[1],vn.host)){var u=U(o);e._ref=u,t||(e._sesref=u)}}E(n.sesname,"e",n.sessecs),e._tz=parseInt(-(new Date).getTimezoneOffset()/60,10),e._ul=_n.language||_n.userLanguage,jn&&(e._sz=jn.width+"x"+jn.height),this.pageData=e}function en(n,t,e){var r=this,i=this.config;if(this.onSendStarted(n),n.dataMsg=i.serializer(l({},n.data)),n.sendurl||(n.sendurl=[]),n.sendurl.unshift(t),e)return void v(n.callback,n,this);var a=this.ioGetTransport(n,t);n.channelName=a.name,a.send(t,l({},n,{callback:function(){o(n.callback)&&n.callback(n,r),r.onSendFinished(n)}}))}function rn(n){return{name:"Form",send:function(t,e){var r=_("iframe",{id:w()});r.style.display="none",gn.body.appendChild(r),v(function(){var i=r.contentWindow.document,a=_("form",{action:t,method:"post"},i),u=_("input",{value:e.dataMsg,type:"hidden",name:"_js"},i);a.appendChild(u),i.body.appendChild(a),a.submit(),m(function(){j(function(){gn.body.removeChild(r)}),o(e.callback)&&e.callback()},n.delay)})}}}function on(n){return{name:"Gif",send:function(t,e){var r=new Image,i=b(e.callback);r.onload=i,m(i,n.delay),r.src=q(t,e.dataMsg)}}}function an(n,t){var e=this.config;return n.dataMsg.length+t.length>2e3?new rn(e):new on(e)}function un(){return j(function(){return Mn.document.referrer},function(){return Tn.document.referrer},function(){return gn.referrer})}function cn(n,t){var e=w(),r=_("script",{src:q(n,"callback="+e)});window[e]=b(function(){window[e]=void 0,j(function(){gn.body.removeChild(r)}),r=void 0,t.apply(null,arguments)}),gn.body.appendChild(r)}function sn(){}function dn(n){this.config=f(n),this.referrer=un(),this.pageData={},this.blocked=!1,this.changeId=null,this.listeners={}}function ln(){u(kn,clearTimeout),kn.length=0}var fn="__lytics__jstag__",gn=window.document,hn=function(){for(var n=gn.getElementsByTagName("script"),r=n.length,i=Array(r),o=0;r>o;o++)i[o]=n[o];for(var a=gn.getElementsByTagName("meta"),u=a.length,c=Array(u),s=0;u>s;s++)c[s]=a[s];var d=t(e(i.concat(c),function(n){return n.getAttribute("data-lytics-global")}),Boolean);if(d.length>1)throw Error("This page specified more than one data-lytics-global attribute. You should put the attribute on either a meta tag, or the script element itself, but not both");return 1===d.length?d[0]:"jstag"}(),pn=window.encodeURIComponent,mn=Object.keys||function(n){return t(c(n),function(t){return{}.hasOwnProperty.call(n,t)})},vn=window.location,wn="2.1.0",yn="seerid",bn="seerses",kn=[],_n=window.navigator,An=_n.userAgent,jn=window.screen,Cn=window.decodeURIComponent,Mn=window.top,Tn=window.parent;dn.prototype={constructor:dn,getid:k,setid:I,parseEvent:V,block:Y,unblock:$,ioCollect:en,ioGetTransport:an,sendMessage:N,send:D,identify:D,mock:F,page:O,pageView:O,pageAnalysis:tn,jsonp:cn,extend:l,parseUri:M,parseQueryString:Z,getCookie:p,setCookie:E,deleteCookie:L,clearCookies:J,onIoReady:sn,onSendStarted:sn,onSendFinished:sn},window[fn]||(window[fn]=window[hn]||{}),window[fn].JSTag=dn,window[fn].init=function(){function r(n){u(n,function(n){window[fn][n]=function(){return o[n].apply(o,arguments)}})}function i(){o&&o.clearCookies(),ln()}var o;return r(["send","mock","identify","page","pageView","block","unblock","parseEvent","clearCookies"]),window[fn].extend=l,window[fn].ckieGet=p,window[fn].ckieSet=E,window[fn].ckieDel=L,window[fn].isLoaded=!1,window[fn].util={forEach:u,reduce:n,map:e,filter:t,contains:R,pairs:H,object:C,filterObject:K,trim:X,extend:l,expose:r,once:b,parseUri:M,parseQueryString:Z},function(n){return i(),o=new dn(n),o.pageAnalysis(),window[fn].isLoaded=!0,window[fn].config=o.config,i}}(),window[hn]=window[fn]}();