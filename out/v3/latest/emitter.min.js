!function(t){"use strict";function n(t){return function(){return this.emit.apply(this,[t].concat(arguments))}}function e(t){switch(t){case"io.ready":case"send.before":case"send.finished":return;default:throw new TypeError("unknown event: "+t)}}if(!t.__lytics__jstag__)throw Error("jstag not defined");var i=t.__lytics__jstag__.JSTag,s=t.__lytics__jstag__.util;s.expose(["bind","unbind"]),s.extend(i.prototype,{bind:function(t,n,i){return e(t),this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([n,i]),this},unbind:function(t,n,i){return e(t),this.listeners[t]?(this.listeners[t]=s.filter(this.listeners[t],function(t){return t[0]!==n&&t[1]!==i}),this):this},emit:function(t){e(t);var n=this.listeners[t]||[],i=[],r=[].slice.call(arguments,1);return n&&0!==n.length?(s.forEach(n,function(t){var n=t[0],e=t[1];e&&e.onetime&&i.push(t),n.apply(null,r)}),this.listeners[t]=s.filter(n,function(t){return!s.contains(i,t)}),this):this},onIoReady:n("io.ready"),onSendStarted:n("send.before"),onSendFinished:n("send.finished")})}(window);