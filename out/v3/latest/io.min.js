!function(n,e){"use strict";function t(n){var t=v({url:"//c.lytics.io",location:en.href,payloadQueue:[],id:e,cid:e,loadid:e,serializer:c,delay:2e3,blockload:!1,path:"/c/",idpath:"/cid/",cookie:cn,sesname:sn,stream:e,sessecs:1800,qsargs:[],ref:!0,tagid:"jstag-csdk",pagedata:{},version:un},n);return t.cid&&(t.cid=[].concat(t.cid)),t}function r(n){this.config=t(n),this.referrer=b(),this.pageData={},this.blocked=!1,this.changeId=null,this.listeners={}}function i(){for(var n=arguments.length,e=Array(n),t=0;n>t;t++)e[t]=arguments[t];this.sendMessage(J(e))}function o(){for(var n=arguments.length,e=Array(n),t=0;n>t;t++)e[t]=arguments[t];var r=J(e);r.data=v({_e:"pv"},this.pageData,r.data),this.sendMessage(r)}function a(){for(var n=arguments.length,e=Array(n),t=0;n>t;t++)e[t]=arguments[t];var r=J(e);r.data=v({_e:"mk"},this.pageData,r.data),this.sendMessage(r,!0)}function u(n,e,t){var r=n.data;if(d()){r._mob="t";var i="unknown";/Android/i.test(an)?i="Android":/BlackBerry/i.test(an)?i="Blackberry":/iPhone|iPad|iPod/i.test(an)?i="IOS":/IEMobile/i.test(an)&&(i="WinMobile"),r._device=i}else r._nmob="t",r._device="desktop";r.url=k(en.href),g()&&(r._if="t"),"_uid"in r&&!r._uid&&delete r._uid;var o=G("__utma");if(o&&o.length>10&&(r._ga=o.substring(0,o.indexOf(".",10))),!("_uid"in r)){var a=G(e.cookie);a&&a.length&&(r._uid=a)}var u=G("optimizelyEndUserId");u&&(r.optimizelyid=u),"_v"in r||(r._v=un),t&&t.changeId&&(r._uido=t.changeId)}function c(n,e){e||(e="");var t=[];return R(n)?z(n)?(t.push(e+"_len="+n.length,e+"_json="+encodeURIComponent(JSON.stringify(n))),w(n,function(n){t.push(c(n,e))})):w(ln(n),function(r){var i=encodeURIComponent(r),o=n[r];D(o)||(""!==e&&(i=[e,i].join(".")),R(o)?t.push(c(o,i)):(Q(o)&&o.length>0||null!=o)&&t.push(i+"="+encodeURIComponent(o)))}):t.push(e+"="+n),t.join("&")}function s(e,t,r){return r||(r=n.document),v(r.createElement(e),t)}function l(){for(var n=null,e=0,t=arguments.length;t>e;e++)try{return arguments[e](n)}catch(r){n=r}}function f(n){n(Y())}function d(){rn.userAgent||rn.vendor||n.opera}function g(){return l(function(){return n.self!==n.top},function(){return!0})}function h(){w(dn,clearTimeout),dn.length=0}function p(n,e){for(var t=arguments.length,r=Math.min(2,t-1),i=Array(t-r),o=r;t>o;o++)i[o-r]=arguments[o];var a=setTimeout(function(){n.apply(null,i)},e);return dn.push(a),a}function m(n){for(var e=arguments.length,t=Math.min(1,e-1),r=Array(e-t),i=t;e>i;i++)r[i-t]=arguments[i];p.apply(null,[n,0].concat(r))}function v(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];var i=!1;return O(t[0])&&(i=!0,t=t.slice(1)),A(t,function(n,t){return t===e?n:(w(ln(t),function(e){n[e]=i&&R(t[e])?v(!0,n[e],t[e]):t[e]}),n)})}function y(n,e){var t=n.config,r=L(t,t.cid[0],"idpath");n.jsonp(r,e)}function b(){return l(function(){return top.document.referrer},function(){return parent.document.referrer},function(){return tn.referrer})}function k(n){return n.replace(/^https?:\/\//,"")}function _(n){return function(){null!=n&&(n.apply(null,arguments),n=null)}}function w(n,e){for(var t=0,r=n.length;r>t;t++)e(n[t],t,n)}function C(n,e){for(var t=0,r=n.length;r>t;t++)if(n[t]===e)return t;return-1}function A(n,e,t){var r=-1,i=n.length;for(2===arguments.length&&i&&(t=n[++r]);++r<i;)t=e(t,n[r],r,n);return t}function I(n,e){return A(n,function(t,r,i){return t.push(e(r,i,n)),t},[])}function j(n,e){return A(n,function(t,r,i){return e(r,i,n)&&t.push(r),t},[])}function M(n){return A(ln(n),function(e,t){return e.push([t,n[t]]),e},[])}function T(n){return A(n,function(n,e){return n[e[0]]=e[1],n},{})}function E(n,e){return T(j(M(n),e))}function x(n,e){return-1!==C(n,e)}function S(n){return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function F(n,e){return 0===n.indexOf(e)}function U(n){var e=[];for(var t in n)e.push(t);return e}function D(n){return"function"==typeof n}function O(n){return"boolean"==typeof n}function R(n){return n&&"object"==typeof n}function z(n){return"[object Array]"==={}.toString.call(n)}function Q(n){return"string"==typeof n}function B(n){return"number"==typeof n}function G(n){var e=RegExp(n+"=([^;]+)"),t=e.exec(decodeURIComponent(tn.cookie));return t&&t[1]}function P(n){q(n,"",-60)}function q(n,e,t){t||(t=7776e3);var r=N(t),i=K(en).hostname,o=n+"="+encodeURIComponent(e)+(i&&i.split(".").length>1?"; domain="+i:"")+("; expires="+r.toUTCString());tn.cookie=o}function N(n){var e=new Date;return e.setTime(e.getTime()+1e3*n),e}function L(n,e,t){return""+n.url+n[t||"path"]+e}function J(n){var e,t,r;return w(n,function(n){switch(typeof n){case"string":e=n;break;case"function":r=n;break;case"object":t=n;break;case"boolean":H("boolean argument is passed to send. Ignoring.");break;default:throw new TypeError("unable to process jstag.send event: unknown value type ("+typeof n+")")}}),null==t&&(t={}),{stream:e,data:t,callback:r}}function V(n,e){return n+(x(n,"?")?"&":"?")+e}function W(){return(new Date).getTime()}function Y(){return"u_"+Math.floor(1e18*Math.random())}function $(){}function H(n){console.warn("Deprecation warning: "+n)}function K(n){var e=s("a",{href:n}),t=j(U(e),function(n){var t=l(function(){return e[n]});return null==t?!1:Q(t)}),r=T(I(t,function(n){return[n,e[n]]}));return null==r.origin&&(r.origin=X(r)),r}function X(n){return n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")}function Z(n){var t={};return"string"!=typeof n?t:(n=S(n).replace(/^(\?|#|&)/,""))?(w(n.split("&"),function(n){var r=n.replace(/\+/g," ").split("="),i=r.shift(),o=r.length>0?r.join("="):e;i=decodeURIComponent(i),o=o===e?null:decodeURIComponent(o),t[i]===e?t[i]=o:z(t[i])?t[i].push(o):t[i]=[t[i],o]}),t):t}function nn(n){function e(){}try{return e.prototype=n,new e}catch(t){}}var en=n.location,tn=n.document,rn=n.navigator,on=n.screen,an=rn.userAgent,un="2.1.0",cn="seerid",sn="seerses",ln=Object.keys||function(n){return j(U(n),function(e){return{}.hasOwnProperty.call(n,e)})},fn={Gif:function(n){return{name:"Gif",send:function(e,t){var r=new Image,i=_(t.callback);r.onload=i,p(i,n.delay),r.src=V(e,t.dataMsg)}}},Form:function(n){return{name:"Form",send:function(e,t){var r=s("iframe",{id:Y()});r.style.display="none",tn.body.appendChild(r),m(function(){var i=r.contentWindow.document,o=s("form",{action:e,method:"post"},i),a=s("input",{value:t.dataMsg,type:"hidden",name:"_js"},i);o.appendChild(a),i.body.appendChild(o),o.submit(),p(function(){l(function(){tn.body.removeChild(r)}),D(t.callback)&&t.callback()},n.delay)})}}}};r.prototype={constructor:r,getid:function(n){var e=this,t=_(function(t){e.setid(t),n(t)}),r=G(this.config.cookie);r&&r.length?m(t,r):this.config.loadid?m(y,this,t):m(f,t)},setid:function(n){var e=this.config.cookie,t=G(e);t&&t.length&&(this.changeId=t),q(e,n)},clearCookies:function(){P(this.config.cookie),P(this.config.sesname)},parseEvent:function(){for(var n=arguments.length,e=Array(n),t=0;n>t;t++)e[t]=arguments[t];return J(e)},block:function(n){if(this.blocked)return this;var e=this;return this.blocked=this.config.blockload=!0,B(n)||(n=2e3),p(function(){e.unblock()},n),this},unblock:function(){if(!this.blocked)return this;var n=this;return this.blocked=this.config.blockload=!1,w(this.config.payloadQueue,function(e){n.sendMessage(e)}),this.config.payloadQueue.length=0,this},sendMessage:function(n,t){null==t&&(t=!1);var r=this,i=this.config;if(!i.url||!i.cid)throw new TypeError("Must have collection url and ProjectIds (cid)");if(this.blocked&&!t)return i.payloadQueue.push(n),e;if(t){if(null==n.callback)throw new TypeError("cannot call mock without a callback");var o=n.data;w(i.payloadQueue,function(n){v(o,n.data)})}n.stream||(n.stream=i.stream),w(this.config.cid,function(e){var o=L(i,e)+(n.stream?"/"+n.stream:"");-1===o.indexOf("_uidn=")&&i.cookie!==cn&&(o=V(o,"_uidn="+i.cookie)),n.data._ts=W(),u(n,i,r),r.getid(function(e){e&&!n.data._uid&&(n.data._uid=e,n.data._getid="t"),r.ioCollect(n,o,t)})})},ioCollect:function(n,t,r){var i=this,o=this.config;if(this.onSendStarted(n),n.dataMsg=o.serializer(v({},n.data)),n.sendurl||(n.sendurl=[]),n.sendurl.unshift(t),r)return m(n.callback,n,this),e;var a=this.ioGetTransport(n,t);n.channelName=a.name,a.send(t,v({},n,{callback:function(){D(n.callback)&&n.callback(n,i),i.onSendFinished(n)}}))},ioGetTransport:function(n,e){var t=this.config;return n.dataMsg.length+e.length>2e3?new fn.Form(t):new fn.Gif(t)},send:i,identify:i,mock:a,page:o,pageView:o,pageAnalysis:function(){var n=this.config,e=G(n.sesname),t=this.pageData,r=K(n.location);if(r.search.length>0){var i=Z(r.search);v(t,E(i,function(n){return F(n[0],"utm_")})),n.qsargs&&n.qsargs.length>0&&v(t,E(i,function(e){return x(n.qsargs,e[0])}))}e||(t._sesstart="1");var o=this.referrer;if(o&&o.length>0){var a=/\/\/(.*)\//.exec(o);if(a&&!x(a[1],en.host)){var u=k(o);t._ref=u,e||(t._sesref=u)}}q(n.sesname,"e",n.sessecs),t._tz=parseInt(-(new Date).getTimezoneOffset()/60,10),t._ul=rn.language||rn.userLanguage,on&&(t._sz=on.width+"x"+on.height),this.pageData=t},jsonp:function(t,r){var i=Y(),o=s("script",{src:V(t,"callback="+i)});n[i]=_(function(){n[i]=e,l(function(){tn.body.removeChild(o)}),o=e,r.apply(null,arguments)}),tn.body.appendChild(o)},extend:v,parseUri:K,parseQueryString:Z,getCookie:G,setCookie:q,deleteCookie:P,onIoReady:$,onSendStarted:$,onSendFinished:$};var dn=[],gn="__lytics__jstag__",hn=function(){for(var n=tn.getElementsByTagName("script"),e=n.length,t=Array(e),r=0;e>r;r++)t[r]=n[r];for(var i=tn.getElementsByTagName("meta"),o=i.length,a=Array(o),u=0;o>u;u++)a[u]=i[u];var c=j(I(t.concat(a),function(n){return n.getAttribute("data-lytics-global")}),Boolean);if(c.length>1)throw Error("This page specified more than one data-lytics-global attribute. You should put the attribute on either a meta tag, or the script element itself, but not both");return 1===c.length?c[0]:"jstag"}();n[gn]||(n[gn]=n[hn]||{}),n[gn].JSTag=r,n[gn].init=function(){function e(e){w(e,function(e){n[gn][e]=function(){return i[e].apply(i,arguments)}})}function t(){i&&i.clearCookies(),h()}var i;return e(["send","mock","identify","page","pageView","block","unblock","parseEvent","clearCookies"]),n[gn].extend=v,n[gn].ckieGet=G,n[gn].ckieSet=q,n[gn].ckieDel=P,n[gn].isLoaded=!1,n[gn].util={forEach:w,reduce:A,map:I,filter:j,contains:x,pairs:M,object:T,filterObject:E,trim:S,extend:v,expose:e,once:_,parseUri:K,parseQueryString:Z},function(e){return t(),i=new r(e),i.pageAnalysis(),n[gn].isLoaded=!0,n[gn].config=i.config,t}}(),n[hn]=n[gn],nn(fn),nn(r),nn(r.prototype),nn(n[gn]),nn(n[gn].util)}(window);