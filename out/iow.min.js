Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n=t||window;for(var r=0,i=this.length;r<i;++r)e.call(n,this[r],r,this)},Array.prototype.filter=function(e,t){var n=t||window,r=[];for(var i=0,s=this.length;i<s;++i){if(!e.call(n,this[i],i,this))continue;r.push(this[i])}return r},Array.prototype.indexOf=function(e,t){var t=t||0;for(var n=0;n<this.length;++n)if(this[n]===e)return n;return-1}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),function(e,t,n){function v(e){return d.call(e)==="[object Function]"}function m(e){return d.call(e)==="[object Object]"}function g(e){return d.call(e)==="[object String]"}function y(e){return d.call(e)==="[object Array]"}function b(e,t,n){if(!t)return e;for(p in t)t.hasOwnProperty(p)&&(!(p in e)||n)&&(e[p]=t[p]);return e}function w(e){if(jQuery){var t=u.url+u.idpath+u.cid;jQuery.ajax({url:t,dataType:"jsonp",success:function(t){o.setid(t),c="t",e(t)}})}}function E(e){return u=b(o.config,e,!0),o}function T(e,t,n){t.opts=b(n?n:{},n),e in S?S[e].push(t):S[e]=[t]}function N(e){var t=[],n=Array.prototype.slice.call(arguments,1);if(S[e]&&S[e][a])for(var r=0,i=S[e][a];r<i;r++)if(v(S[e][r])){var s=S[e][r];s.opts.onetime?t.push(s):s.apply({},n)}t[a]>0&&S[e]&&(S[e]=S[e].filter(function(e,n,r){return t.indexOf(e)==-1})),t.forEach(function(e){e.apply({},n)})}function C(){"_q"in o&&y(o._q)&&o._q.forEach(function(e){g(e[1])&&e[1]in o?T(e[0],function(){o[e[1]].apply(o,h.call(e[2]))}):T.apply(o,[e[0]].concat(h.call(e[1])))})}function k(e){if(i[a]>0){var t=i.indexOf(e+"=");if(t!=-1)return t+=e.length+1,end=i.indexOf(";",t),end==-1&&(end=i[a]),unescape(i.substring(t,end))}return null}function L(e){t.cookie=e+"=; path=/; expires=Monday, 19-Aug-1996 05:00:00 GMT"}function A(e,n,r,i,s,o){i=i||"/";var u=e+"="+escape(n)+(r?"; expires="+r.toGMTString():"")+(i?"; path="+i:"")+(s?"; domain="+s:"")+(o?"; secure":"");t.cookie=u}function O(e,t,n){return e.indexOf("?")<1?e+="?":e+="&",e+t+"="+n}function _(e){return encodeURIComponent(e)}function D(e,t){var n=[],r="";arguments.length==1&&(t="");for(p in e)r=p,t!=""&&(r=t+"."+p),m(e[p])?n.push(D(e[p],p)):v(e[p])?n.push(r+"="+e[p]()):y(e[p])?n.push(r+"=["+e[p].join(",")+"]"):n.push(r+"="+_(e[p]));return n.join("&")}function P(e){return this instanceof P?(this.init(e),this):new P(e)}function H(){var e,t,n,r=arguments;g(r[0])?(e=r[0],t=r[1],r.length===3&&(n=r[2])):(t=r[0],r.length===2&&(n=r[1]));if("io"in f)f.io.forEach(function(r){r.send(t,n,e)});else{var i=new P;i.send(t,n,e)}}function B(e,t){var n="";t=t||"";for(p in e)m(e[p])?n+=B(e[p],p+"."):v(e[p])||(n+="<tr><td>"+t+p+"</td><td>"+e[p]+"</td></tr>");return n}var r=t.location,i=t.cookie,s=t.referrer,o=e.jstag||{},u=o.config||{},a="length",f={},l=undefined,c=undefined,h=Array.prototype.slice,d=Object.prototype.toString;e.jstag=o,e.console||(e.console={log:function(){}}),o.config=b(u,{url:"",Q:[],id:undefined,cid:undefined,getid:w,serializer:D,pipeline:["identity","analyze"],delay:200,path:"/c/",idpath:"/cid/",cookie:"seerid",sesname:"seerses",stream:undefined,sessecs:1800,channel:"Form"}),o.setid=function(e){l=e,A(u.cookie,e)},o.getid=function(e){if(u.getid&&v(u.getid)){e=e?e:function(){};var t=k(u.cookie);t&&t[a]&&t!="undefined"?(l=t,e()):u.getid(e)}return l},"_c"in o&&E(o._c),o.init=o.connect=E;var S={},x={onetime:!1};o.bind=T,o.emit=N,o.channels={Gif:function(n){return{images:[],send:function(n,r){if(t.images){var i=this,s=new Image,u=function(e){if(!r.callback.hasRun){r.callback.hasRun=!0;try{r.callback(e)}catch(t){}}};this.images.push(s),arguments.length===2&&r&&v(r.callback)&&(r.callback.hasRun=!1,s.onload&&(s.onload=u()),e.setTimeout(function(){u({timeout:!0})},o.config.delay)),s.src=this.getUrl(n)}},getUrl:function(e){var t=n.sendurl;return t.indexOf("?")<1?t+="?":t+="&",t+e}}},Form:function(e){this.config=e;var n=this;return{send:function(n,r){try{var i=t.createElement("iframe"),s,o,a="f"+Math.floor(Math.random()*99999),f=function(e){r&&r.callback&&!r.callback.hasRun&&(r.callback.hasRun=!0,r.callback(e))};t.body.appendChild(i),i.style.display="none",i.id=a,setTimeout(function(){s=i.contentWindow.document.createElement("form"),i.contentWindow.document.body.appendChild(s),s.setAttribute("action",e.sendurl),s.setAttribute("method","post"),o=i.contentWindow.document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name","_js"),o.value=n,s.appendChild(o),s.submit(),setTimeout(function(){t.body.removeChild(i),f({timeout:!0})},u.delay*2)},0)}catch(l){var c=new Gif(e);try{c.send(n)}catch(l){}}}}}};var M={analyze:function(e){e.data._e="pv";var t=k(o.config.sesname),n=undefined;if(!t){var i=new Date;i.setTime(i.getTime()+o.config.sessecs*1e3),A(o.config.sesname,"e",i),e.data._sesstart="1"}if(!("_ref"in e.data)&&s&&s[a]>1){var u=s.toString().match(/\/\/(.*)\//);u&&u[1].indexOf(r.host)==-1&&(e.data._ref=s.replace("http://","").replace("https://",""),t||(e.data._sesref=s.replace("http://","").replace("https://","")))}},identity:function(t){"url"in t.data||(t.data.url=r.href.replace("http://","").replace("https://","")),t.data._if=e.location!=e.parent.location?"t":"f","_uid"in t.data&&t.data["_uid"]==undefined&&delete t.data._uid;if(!("_uid"in t.data))if(l)t.data._uid=l;else{var n=k(u.cookie);n&&n[a]&&n!="undefined"&&(l=t.data._uid=n)}c&&(t.data._getid="t")}};M.analyze.onetime=!0,o.Io=P,o.send=H,P.prototype=function(){var t=[],n=null,r=null;return{init:function(i){n=this,r=u;if(!r.url||!r.cid)throw new Error("Must have collection url and Account");"cid"in r&&!r.cid&&(o.config.cid=r.cid),this.serializer=r.serializer,"io"in f?f.io.push(this):f.io=[this],this.channel=new o.channels[r.channel](r),r.pipeline.forEach(function(n){v(n)?t.push(n):n in M?t.push(M[n]):n in e&&t.push(e[n])});if(r.Q&&r.length>0){var s=0,a=Q.length;r.Q.forEach(function(e){n.send.apply(n,e)})}r.Q&&(r.Q.push=function(){n.send.apply(n,Array.prototype.slice.call(arguments))}),o.emit("io.ready",this)},collect:function(e,t){var n=this;o.emit("send.before",e),this.channel.send(this.serializer(e.data),{callback:function(r){e.return=r,v(t)&&t(e,n),o.emit("send.finished",e,n)}})},send:function(e,n,i){e=e?e:{},this.data=e,e._ts=(new Date).getTime();var s={data:e,callback:n,config:this.config},o=this,a=r.url+r.path+r.cid;i=i||r.stream,r.sendurl=i?a+"/"+i:a,r.sendurl.indexOf("_uidn=")==-1&&u.cookie!="seerid"&&(r.sendurl=O(r.sendurl,"_uidn",u.cookie)),t.forEach(function(e){e(s)}),t=t.filter(function(e){return!e.onetime}),l?o.collect(s,n):u.getid&&v(u.getid)?u.getid(function(t){t&&!e._uid&&(e._uid=t,l=t),o.collect(s,n)}):o.collect(s,n)},debug:function(){return"<table><tr><th>field</th><th>value</th></tr>"+B(this.data)+"<tr><th>config</th></tr><tr>"+B(u)+"</tr></table>"}}}(),e&&"asyncInit"in e&&v(e.asyncInit)&&e.asyncInit(),"ready"in o||(o.ready=function(){}),o.load=function(){return this},C(),o.emit("ready")}(window,document);